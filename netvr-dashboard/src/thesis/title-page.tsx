import pdf from '@react-pdf/renderer'
import { colors } from './colors'
import { Page, Text, usePDFContext } from './base'
import { PropsWithChildren, useRef } from 'react'
const { View, StyleSheet, Svg, Path } = pdf

function HStack({
  children,
  style,
}: PropsWithChildren<{ style?: pdf.ViewProps['style'] }>) {
  return (
    <View style={[...[style ?? []].flat(), { flexDirection: 'row' }]}>
      {children}
    </View>
  )
}

export function TitlePage({ title }: { title: string }) {
  const { lang } = usePDFContext()
  const date = useRef(new Date()).current
  return (
    <Page>
      <HStack>
        <View style={style.line} />
        <View style={{ flexDirection: 'column' }}>
          <HStack style={{ alignItems: 'stretch' }}>
            <Svg viewBox="0 0 141.73 141.73" style={style.logo}>
              <Path fill="#0065BD" d="M0 0h141.732v141.732H0z" />
              <Path
                fill="#FFF"
                d="m114.874 61.461 3.631-2.649c-1.374-1.472-2.846-3.237-2.846-6.083 0-2.159 1.472-4.514 3.336-5.494-.98-1.179-2.551-2.259-4.808-2.259-2.943 0-5.397 2.159-5.397 5.005 0 1.962 1.277 3.629 2.748 4.416 0 2.748 1.275 5.2 3.336 7.064M95.447 42.132l3.041-5.398h-4.514c0 .982-.883 2.062-1.963 2.062-1.178 0-1.962-.785-1.962-2.062h-4.022c0 1.179-.884 2.062-1.963 2.062-1.078 0-1.963-.882-1.963-2.062h-4.513l2.648 5.201a63.049 63.049 0 0 1 5.985-.294c3.633 0 6.772.196 9.226.491m-8.242 47.884c-.491-.884-.982-1.964-.982-3.926 0-2.552 1.473-4.709 4.611-6.083 2.062-.982 3.631-1.864 6.379-3.238 6.477-3.337 8.733-9.615 8.733-16.09 0-3.239-.884-5.791-1.964-7.949.295 1.767.589 3.238.589 5.005 0 6.77-2.354 11.773-8.536 14.815-3.926 1.962-5.887 2.748-8.242 3.926-3.336 1.765-5.2 4.021-5.2 6.768 0 3.436 1.765 5.985 4.612 6.772m-3.828-1.277c-1.079-1.08-2.256-3.042-2.256-5.594 0-3.236 2.158-5.985 5.985-7.947 3.336-1.569 5.298-2.354 8.241-3.729 6.183-3.042 8.047-8.242 8.047-13.835 0-5.396-1.767-8.145-3.238-9.91 1.079 2.06 1.374 4.514 1.374 6.573 0 5.985-1.767 11.186-8.732 13.933-3.533 1.472-5.79 1.963-8.832 3.336-4.808 2.259-6.672 4.908-6.672 8.832 0 3.73 2.355 7.261 6.083 8.341m-3.728-.785c-1.669-1.374-3.828-3.629-3.828-7.652 0-4.221 1.768-7.36 7.263-9.714 3.531-1.472 5.396-2.159 8.732-3.434 7.064-2.649 8.536-7.852 8.536-12.953 0-4.906-1.767-7.752-3.926-9.616 1.277 1.569 2.062 4.22 2.062 6.967 0 6.476-2.453 10.106-9.42 12.559-2.846.884-5.887 1.767-9.026 2.944-5.692 2.159-8.636 5.3-8.636 10.598 0 5.493 4.22 9.616 8.243 10.301m-3.925-.685c-3.925-1.964-5.789-6.183-5.789-9.911 0-5.397 3.336-9.224 8.928-11.284 3.435-1.276 6.183-2.061 9.616-3.238 6.673-2.354 8.832-5.496 8.832-11.481 0-3.434-1.276-6.378-3.337-8.045.688.785.884 1.767.884 2.649 0 1.667-.884 2.454-2.159 2.454-.785 0-1.57-.492-1.668-1.277.393.295.688.393 1.078.393 1.081 0 1.669-.785 1.669-1.864 0-1.667-1.57-2.552-3.14-2.747-1.374-.195-2.846-.195-4.515-.195-1.667 0-3.237.098-5.297.195 1.274 1.765 5.493 1.275 6.77 2.159-1.079-.1-2.158-.1-3.238.195 0 .687-.294 1.472-.981 1.472-1.275 0-1.862-1.375-2.747-3.827l-5.004.393c-.784.098-1.079.392-.981.982l.491 4.904c0 .197.196.295.393.295.195 0 .392-.098.49-.393.195-.391.785-1.275 2.257-1.275 2.158 0 3.826 1.962 3.924 4.219-.783-1.079-2.55-2.06-5.493-2.06-2.258 0-4.121.686-7.065.686-3.14 0-4.906-1.177-4.906-2.649 0-.685.098-1.078.49-1.569-1.276.589-2.257 1.669-2.257 3.436 0 2.157 1.57 4.414 6.182 4.414 4.22 0 6.182-2.649 10.008-2.649 1.767 0 2.649.884 2.649 1.864 0 .884-.785 1.667-2.158 1.667-1.669 0-2.846-.882-3.436-1.765-.098-.195-.195-.295-.393-.295-.293 0-.391.197-.391.393l.098 4.71c0 .588.293.882.98.785 2.944-.294 5.985-.687 8.832-.884 5.298-.49 8.928-4.022 8.928-7.948 0-.587 0-1.08-.099-1.667.492.785.688 1.569.688 2.551 0 3.631-1.963 6.378-8.243 8.045-3.336.883-5.788 1.277-8.635 1.962-7.555 1.767-12.461 7.555-12.461 14.032.001 5.985 4.221 11.381 10.206 12.168m-32.87-35.423c.393-.884.49-1.669.49-2.256 0-1.277-.589-2.454-1.178-2.944 1.472 0 2.748 1.079 2.748 2.549 0 1.375-.883 2.259-2.06 2.651m18.055 23.352 3.139-1.667c1.08-6.575 5.004-11.186 11.872-12.853-3.63.195-6.77.293-11.185.488-4.711.197-12.463.787-17.859 1.179-1.08.098-1.767-.294-2.062-1.179-.293-.98-.882-2.845-.98-3.924-.099-.882.098-1.472.883-2.062 1.569-1.078 3.139-2.354 3.139-5.003 0-2.844-2.453-4.708-4.709-4.708-.785 0-1.373.098-1.864.294-.589-.394-1.177-.687-2.355-.687-1.667 0-3.138 1.078-3.532 1.962-2.845-.197-5.102 1.864-4.907 4.611.394-.393 1.177-.785 2.062-.785 1.08 0 2.06.785 2.06 1.962 0 1.08-.196 2.454-.196 3.926 0 4.513 3.631 6.868 3.631 9.222 0 1.179-.883 2.159-2.061 2.159.687 2.454 2.943 3.729 5.985 3.729 1.962 0 3.729-.195 6.574-.195 8.144 0 11.678.883 12.365 3.531m30.22 27.769h.98c-.098-3.14-.882-5.299-2.158-7.556-.687-1.274-1.569-2.648-2.256-3.533-.393-.588-.883-.783-1.473-.783-.393 0-.687.293-.393.783.785 1.277 1.865 3.239 3.238 6.28-1.178.197-1.472.787-1.472 1.767.002 1.569 1.473 3.042 3.534 3.042M39.027 52.239c.098-2.749-1.08-4.221-2.747-4.906.294-.098.688-.295 1.275-.295 1.277 0 2.65 1.08 2.65 2.747 0 .882-.295 1.864-1.178 2.454m62.896 69.076c-.393-.883-1.669-1.766-3.238-1.766-.883 0-1.472.195-1.865.391.099-.784.885-1.667 2.454-1.667 1.864 0 2.845 1.472 2.649 3.042m-.59 4.221c-.588-.688-1.569-1.277-2.845-1.277-1.57 0-2.354.688-2.747 1.178-.196-1.178.784-2.649 2.648-2.649 1.964-.001 2.944 1.373 2.944 2.748M31.569 78.73c.688-1.668 2.257-2.845 4.122-3.237a6.568 6.568 0 0 1 1.374-1.472l-3.336-13.933c-.393-.982-.687-1.963-.687-3.336 0-1.472.294-2.944.294-3.729 0-.687-.393-.884-.785-.884-.294 0-.491 0-.589.1v.393c0 2.256-1.374 4.021-3.629 4.021-2.257 0-4.024-1.863-4.024-4.021 0-2.159 1.767-3.924 4.024-3.924.392 0 .882 0 1.472.195.685-1.767 2.844-3.336 5.101-3.042-1.57-1.962-3.924-3.139-6.573-3.139-5.692 0-10.205 4.12-10.205 9.91 0 5.396 4.415 9.714 9.911 9.812l3.53 16.286zm15.21 21.097c1.472 0 3.042-.784 4.514-2.257 2.649-2.551 6.378-6.378 8.634-7.85 1.962-1.274 3.238-1.767 4.514-1.767.785 0 1.374.197 1.962.785l3.336-2.552c-3.827-2.845-5.593-6.573-5.691-11.185-5.298 2.845-9.125 6.769-13.54 10.499-.786.588-1.178.883-1.865.883s-1.275-.688-2.453-1.864c-.982-.982-1.178-1.57-1.178-2.257 0-1.178.393-1.569.393-3.14 0-3.141-2.452-4.907-4.809-4.907-1.962 0-3.434 1.081-3.924 2.454-2.649.196-4.318 2.158-4.318 4.219 0 .491.099.882.197 1.177-.982.59-1.963 1.767-1.963 3.336 0 1.669.883 3.239 2.354 3.729-.195-.295-.294-.686-.294-1.178 0-.883.785-1.667 1.864-1.667.883 0 1.472.293 2.159 1.077.882 1.18 1.767 2.259 3.238 3.534 1.374 1.177 2.944 1.962 4.415 2.846.883.588 1.57 1.373 1.57 2.55 0 .786-.588 1.669-1.766 1.964.492 1.08 1.474 1.571 2.651 1.571m-5.593-19.133c-.099-1.964-1.57-3.534-3.435-3.926a2.69 2.69 0 0 1 1.571-.49c1.373 0 2.454 1.177 2.454 2.452-.001.982-.296 1.472-.59 1.964m10.891 51.612c-.393-.491-.588-.981-.588-1.571 0-1.177.981-2.06 2.354-2.06 2.159 0 3.336 2.354 6.182 2.354 3.239 0 4.809-2.354 7.752-2.354 1.472 0 3.532.883 3.532 2.747 0 .295-.098.589-.293.784 3.334 0 5.691-2.844 5.691-7.555 0-6.573-.197-9.224-.295-12.854 2.551-.098 5.005-1.374 4.611-5.396-.688.588-1.472.883-2.354.883-1.178 0-2.061-.883-2.061-2.159 0-.59 0-1.277.099-1.962l11.479-.295a3.597 3.597 0 0 1-1.864-3.14c0-.981.394-1.669 1.18-2.062-1.081-2.257-1.964-4.023-3.043-5.69-.589-.883-1.275-1.767-2.649-1.767-3.042-.098-9.223.785-12.363 1.864-2.355.785-4.612 2.552-4.612 6.575 0 3.727 1.275 10.302 1.177 20.605 0 1.472-.392 1.962-1.274 2.157-.786.197-2.847.393-4.121.197-.688-.098-1.276-.588-1.669-2.061-.49-2.061-1.962-4.122-4.906-4.122-2.649 0-5.003 1.964-4.611 4.905-1.277.787-1.865 2.062-1.865 3.239s.393 2.159.883 2.748c-.295.688-.393 1.078-.393 1.765-.002 2.458 2.157 4.225 4.021 4.225M38.242 83.343c-.59-1.177-1.865-1.864-3.336-1.864-.588 0-1.08.098-1.472.195.197-.784 1.08-1.472 2.356-1.472 1.667 0 2.747 1.277 2.452 3.141m17.172 37.972c-.393-.883-1.669-1.766-3.239-1.766-.882 0-1.472.195-1.864.391.1-.784.883-1.667 2.454-1.667 1.863 0 2.844 1.472 2.649 3.042m-8.341 8.538c-.294-.59-.393-1.178-.393-1.768 0-.587.099-1.077.294-1.569-.49-.882-.784-1.864-.784-2.943 0-1.473.686-2.845 1.667-3.729L41.775 93.45c-.982-.489-1.964-1.079-2.749-1.767-1.375-1.177-2.158-2.06-3.434-3.531-.392-.395-.687-.59-1.08-.59-.588 0-.981.393-.785 1.178l1.275 6.083 2.649 1.864 7.36 31.596 2.062 1.57zm7.752-4.317c-.588-.688-1.57-1.277-2.845-1.277-1.569 0-2.356.688-2.749 1.178-.195-1.178.786-2.649 2.65-2.649 1.962-.001 2.944 1.373 2.944 2.748m-48.472 7.358 5.984-4.611 7.359-31.596 2.651-1.864 5.887-25.314-1.275-5.888c-1.472-.295-2.749-.687-3.827-1.275L6.353 132.894zm92.233-.588c-.393-.491-.589-.981-.589-1.571 0-1.177.981-2.06 2.355-2.06 2.158 0 3.337 2.354 6.182 2.354 3.238 0 4.808-2.354 7.752-2.354 1.472 0 3.532.883 3.532 2.747 0 .295-.099.589-.295.784 3.336 0 5.691-2.844 5.691-7.555 0-6.28-.589-13.245-1.276-20.213 1.767-.393 3.436-2.159 3.436-4.416 0-.784-.295-1.667-.786-2.452-.49.688-1.373 1.275-2.845 1.668-2.061.589-4.612.884-6.476.884-4.22 0-5.594-.295-7.556-.884-.099-2.649-1.766-4.807-3.337-6.278 2.453.979 3.533 1.472 7.458 1.472 12.56 0 20.311-8.439 20.311-18.056 0-6.966-4.415-10.205-8.438-12.561l-3.729 2.651c4.514 2.06 7.457 5.101 7.457 9.222 0 4.514-3.63 7.752-7.85 7.752-4.514 0-8.046-3.238-8.046-7.654 0-3.334 1.57-5.788 4.515-8.143 2.942-2.356 7.456-5.201 9.909-7.85 1.276-1.375 2.355-3.532 2.257-5.201 1.669-.785 2.943-2.454 2.943-4.611 0-2.846-2.746-5.005-5.69-5.005-1.767 0-3.729 1.08-4.711 2.259 1.767.685 3.437 3.042 3.437 5.494 0 2.061-1.277 3.826-2.749 5.298-2.257 2.256-5.2 3.926-8.438 6.575-3.925 3.239-6.28 7.065-6.28 11.381 0 5.985 4.612 11.578 11.873 11.578 2.355 0 4.22-.49 5.595-1.374-2.356 2.749-6.772 4.121-11.384 4.121-4.023 0-6.77-.588-9.714-2.747-2.649-1.962-4.71-6.573-4.611-10.009-2.159 1.276-4.71 2.454-6.867 3.436-3.043 1.473-4.024 3.042-4.024 5.691 0 3.531 2.453 6.28 3.532 8.34 1.472 2.648 1.963 5.003 2.159 7.457.589 5.985 4.023 8.732 10.106 8.732 2.747 0 6.378-.197 7.85-.393.589 2.748 1.275 5.985 1.275 8.439 0 1.472-.393 1.962-1.275 2.157-.785.197-2.847.393-4.121.197-.688-.098-1.275-.588-1.669-2.061-.49-2.061-1.962-4.122-4.905-4.122-2.649 0-5.004 1.964-4.611 4.905-1.275.787-1.865 2.062-1.865 3.239s.393 2.159.883 2.748c-.293.688-.392 1.078-.392 1.765-.002 2.457 2.157 4.224 4.021 4.224"
              />
            </Svg>
            <View style={{ justifyContent: 'space-between' }}>
              {/*<Text
                style={{
                  fontWeight: 'bold',
                  color: colors.blue,
                  fontSize: '12.5268mm',
                }}
              >
                {lang === 'cs' ? 'ČVUT' : 'CTU'}
              </Text>*/}
              <Text
                style={{
                  fontWeight: 'bold',
                  color: colors.blue,
                  fontSize: '4.5mm',
                  marginTop: 'auto',
                }}
              >
                {lang === 'cs'
                  ? 'ČESKÉ VYSOKÉ\nUČENÍ TECHNICKÉ\nV PRAZE'
                  : 'CZECH TECHNICAL\nUNIVERSITY\nIN PRAGUE'}
              </Text>
            </View>
          </HStack>
          <View style={{ height: '8mm' }} />
          <HStack style={{ alignItems: 'flex-end' }}>
            <View style={{ width: '34.213mm' }}>
              <Text
                style={{ fontSize: 32, fontWeight: 'bold', color: colors.blue }}
              >
                F3
              </Text>
            </View>
            <Text style={{ fontSize: 11.5, marginBottom: '1.5mm' }}>
              {lang === 'cs'
                ? 'Fakulta Elektrotechnická\nKatedra počítačové grafiky a interakce'
                : 'Faculty of Electrical Engineering\nDepartment of Computer Graphics and Interaction'}
            </Text>
          </HStack>
          <View style={{ height: '40mm' }} />
          <Text style={{ fontSize: 25 }}>{title}</Text>
          <Text style={{ fontSize: 15, marginTop: '5mm' }}>
            {lang === 'en'
              ? 'Software or Research Project'
              : 'Softwarový nebo výzkumný projekt'}
          </Text>
          <View style={{ height: '15mm' }} />
          <Text style={{ fontSize: 15 }}>Bc. Isabella Skořepová</Text>
          <View style={{ flexGrow: 1 }} />

          <Text style={style.foot}>
            {lang === 'en' ? 'Supervisor' : 'Vedoucí'}: Ing. David Sedláček,
            Ph.D.
          </Text>
          <Text style={style.foot}>
            {month(date.getMonth(), lang)} {date.getFullYear()}
          </Text>
          <pdf.Link
            src="https://isbl.cz/netvr"
            style={[style.foot, { fontWeight: 'light' }]}
          >
            isbl.cz/netvr
          </pdf.Link>
        </View>
      </HStack>
    </Page>
  )
}

function month(id: number, lang: 'cs' | 'en') {
  return [
    ['January', 'Leden'],
    ['February', 'Únor'],
    ['March', 'Březen'],
    ['April', 'Duben'],
    ['May', 'Květen'],
    ['June', 'Červen'],
    ['July', 'Červenec'],
    ['August', 'Srpen'],
    ['September', 'Září'],
    ['October', 'Říjen'],
    ['November', 'Listopad'],
    ['December', 'Prosinec'],
  ][id][lang === 'cs' ? 1 : 0]
}

const style = StyleSheet.create({
  line: {
    backgroundColor: colors.blue,
    width: '4mm',
    height: '230mm',
    marginRight: '4mm',
  },
  logo: {
    height: '30mm',
    width: '30mm',
    marginRight: '4.213mm',
  },
  foot: {
    fontSize: 11.5,
    color: 'black',
    textDecoration: 'none',
  },
})
